<div id="modal-backdrop" class="modal-backdrop fade show" style="display:block;"></div>
<div id="modal" class="modal fade show" tabindex="-1" style="display:block;">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <form>
                <div class="modal-header">
                    <h5 class="modal-title" id="modalLabel">
                        <i class="fa fa-fingerprint"></i> {{ Translate $.lang "otptoken.add_new_title" }}
                    </h5>
                </div>
                <div id="modal-body" class="modal-body">
                    <div id="add-token-failed" style="display: none" class="alert alert-danger alert-dismissible mx-auto" role="alert">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">{{ Translate $.lang "otptoken.token_description_label" }}</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            name="desc" 
                            id="desc" 
                            value="" 
                            autofocus="autofocus" 
                            placeholder="{{ Translate $.lang "otptoken.token_description_placeholder" }}" 
                            aria-describedby="tokenHelpBlock">
                        <div id="tokenHelpBlock" class="form-text">
                            {{ Translate $.lang "otptoken.token_description_help" }}
                        </div>
                    </div>
                    <div class="mb-3">
                        <img src="/static/images/scan-qr-code.png" class="img-fluid" alt="{{ Translate $.lang "otptoken.qr_code_alt" }}">
                    </div>
                </div>
                <div class="modal-footer">
                    <div id="add-indicator" class="htmx-indicator spinner-border text-primary" role="status">
                        <span class="visually-hidden">{{ Translate $.lang "otptoken.adding_token" }}</span>
                    </div>
                    <button 
                        hx-headers='{"X-CSRF-Token": "{{ $.csrf }}"}'
                        hx-target-error="add-token-failed"
                        hx-post="/otptoken/add"
                        hx-target="#modal"
                        hx-indicator="#add-indicator"
                        hx-swap="innerHTML"
                        class="btn btn-primary"
                        type="submit">
                        {{ Translate $.lang "common.add" }}
                    </button>
                    <button 
                        type="button" 
                        class="btn btn-secondary" 
                        onclick="closeModal('otptoken-modal')">
                        {{ Translate $.lang "common.cancel" }}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
